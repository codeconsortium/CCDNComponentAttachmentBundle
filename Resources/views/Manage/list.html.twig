{% extends param('ccdn_component_attachment.manage.list.layout_template') %}

{% block stylesheets %}
	{{ parent() }}
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{- asset('bundles/ccdncomponentcommon/js/ccdn/jquery.checkboxes.js') -}}" type="text/javascript"></script>
{% endblock %}

{% block title %}{{- truncDot('ccdn_component_attachment.title.index' |trans({}, 'CCDNComponentAttachmentBundle'), param('ccdn_component_attachment.seo.title_length')) -}}{% endblock %}

{% block sidebar %}
	{{ parent() }}

	{%- include 'CCDNComponentAttachmentBundle:Sidebar:sidebar.html.twig' -%}

{% endblock %}

{% block sidebar_status %}
	{{ parent() }}

	{%- include 'CCDNComponentAttachmentBundle:Sidebar:quotas.html.twig' -%}

{% endblock %}


{% block body %}

	{%- spaceless -%}

	{%- include 'CCDNComponentCommonBundle:Flashes:flashes.html.twig' -%}

	{%- include 'CCDNComponentCrumbTrailBundle:Trail:trail.html.twig' with {'crumbs': crumbs } -%}

	<h2>{{- 'ccdn_component_attachment.title.index' |trans({}, 'CCDNComponentAttachmentBundle') -}}</h2>

	<form method="POST" action="{{- path('ccdn_component_attachment_bulk_action') -}}">
	
		<div class="btn-toolbar" style="display:block !important;clear:both !important;">
			<div class="pull-left">
				<input type="submit" class="btn btn-danger disabled" value="{{- 'ccdn_component_attachment.link.delete' |trans({}, 'CCDNComponentAttachmentBundle') -}}" name="submit_delete" disabled data-responds-disabled="attachments">
			</div>
			{%- if pager.haveToPaginate -%}
				<div class="pull-right">
			    	{{- pagerfanta(pager, 'twitter_bootstrap_compact', {'routeName':'ccdn_component_attachment_index_paginated'}) -}}
				</div>
			{%- endif -%}
			<br><br>
		</div>

		<table class="table">
			<thead>
				<th class="center" style="width: 18px;"><input type="checkbox" id="check_all" name="check_all" class="hidden" data-compat='interactive-js-compat' data-action-toggle="attachments" data-identifier="attachments" data-qualifier="all"></th>
				<th class="center"></th>
				<th class="left">{{- 'ccdn_component_attachment.manage.table.head.file' | trans({}, 'CCDNComponentAttachmentBundle') -}}</th>
				<th class="center">{{- 'ccdn_component_attachment.manage.table.head.uploaded_datetime' | trans({}, 'CCDNComponentAttachmentBundle') -}}</th>
				<th class="center">{{- 'ccdn_component_attachment.manage.table.head.file_size' | trans({}, 'CCDNComponentAttachmentBundle') -}}</th>
			</thead>
			<tbody>
			{%- for row, attachment in attachments -%}
				<tr class="marked_read">
					<td class="center">
						<input type="checkbox" id="check_multiselect_{{- attachment.id -}}" name="check_multiselect_{{- attachment.id -}}" data-check-all-responds="true" data-identifier="attachments">
					</td>
					<td class="center" style="width:70px;">
						<a rel="nofollow" href="{{- path('ccdn_component_attachment_download', {'attachmentId': attachment.getId }) -}}"><img src="{{- path('ccdn_component_attachment_thumbnail', {'attachmentId': attachment.getId }) -}}" alt="{{- attachment.getFileNameOriginal -}}"></a>
					</td>
					<td class="left">
						<a rel="nofollow" href="{{- path('ccdn_component_attachment_download', {'attachmentId': attachment.getId }) -}}">{{- attachment.getFileNameOriginal -}}</a>
						<br>{{- attachment.getDescription -}}
					</td>
					<td class="center" style="width: 200px;">{{- attachment.getCreatedDate |date(param('ccdn_component_attachment.manage.list.attachment_uploaded_datetime_format')) -}}</td>
					<td class="center" style="width: 80px;">{{- attachment.getFileSize -}}</td>
				</tr>
			{%- else -%}
				<tr>
					<td class="center" colspan="5">{{- 'ccdn_component_attachment.manage.table.empty' | trans({}, 'CCDNComponentAttachmentBundle') -}}</td>
				</tr>
			{%- endfor -%}
			</tbody>
		</table>

		<div class="btn-toolbar" style="display:block !important;clear:both !important;">
			<div class="pull-left">
			</div>
			{%- if pager.haveToPaginate -%}
				<div class="pull-right">
			    	{{- pagerfanta(pager, 'twitter_bootstrap_compact', {'routeName':'ccdn_component_attachment_index_paginated'}) -}}
				</div>
			{%- endif -%}
			<br><br>
		</div>

	</form>

	{%- include 'CCDNComponentCrumbTrailBundle:Trail:trail.html.twig' with {'crumbs': crumbs } -%}

	{%- endspaceless -%}

{% endblock %}
